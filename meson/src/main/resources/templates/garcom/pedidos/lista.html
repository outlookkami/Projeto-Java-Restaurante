<!DOCTYPE html>
<html lang="pt-BR" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <th:block th:replace="~{fragments/head :: head('Lista Comandas')}"></th:block>
    <script th:src="@{/js/garcom.js}"></script>
    <script th:src="@{/js/fluxos-garcom/controleModal.js}"></script>
</head>
<body>

<div class="layout">
    <aside th:replace="~{fragments/menu-lateral-garcom :: menu-lateral}"></aside>

    <main class="content">
        <header class="header">
            <h1>Pedidos</h1>
        </header>
        <!-- Listagem dos Pedidos -->
        <section class="pedidos">
            <div class="card-pedido" th:each="pedido : ${pedidos}" th:classappend="${pedido.status}" >
                <div th:onclick="'abrirModalDetalhePedido(' + ${pedido.id} + ')'">
                    <span class="titulo-pedido" th:text="'MESA ' + ${pedido.comanda.mesa.numero}">PEDIDO</span>
                    <h4 th:text="${pedido.comanda.nomeCliente}"></h4>
                    <h6 th:text="'Pedido em: '+ ${pedido.dataCriacao}"></h6>
                    <span class="status" th:text="${pedido.status}" th:classappend="${pedido.status.name().toLowerCase()}"></span>
                    <p>
                        <span th:text="'R$ ' + ${pedido.valor != null ? pedido.valor : '0.00'}"></span>
                    </p>
                </div>
            </div>
        </section>
    </main>
</div>

<div id="modalPrincipal" class="modal">
    <div class="modal-conteudo">
        <span class="fechar" onclick="fecharModal()">Ã—</span>
        <div id="modalConteudo"></div>
    </div>
</div>

<style>
    * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Dm Sans', Arial, sans-serif;
}

.pedidos {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
    gap: 20px;
}

.card-pedido {
    background: white;
    border-radius: 16px;
    padding: 20px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.05);
    cursor: pointer;
<!--    margin-top: 12px;-->
}

.card-pedido .titulo-pedido {
    font-size: 12px;
    letter-spacing: 1px;
    color: #777;
}

.card-pedido h4 {
    font-size: 32px;
    margin: 10px 0;
    color: #6b3b2a;
    font-family: 'Playfair Display', 'DM Sans', 'Inter', Arial;
}

.card-pedido p {
    font-size: 14px;
    color: #555;
}

.mesa-click{
    text-decoration: none;
    color: black;
}

.status {
    display: flex;
    margin-top: 10px;
    padding: 4px 10px;
    border-radius: 8px;
    font-size: 12px;
}

.fechada{
    background: #f1e3dd;
    color: #6b3b2a;
    border: solid 1px #6b3b2a;
    width: 80px;
    text-align: justify;
    margin-bottom: 6px;
}

.aberta {
    background: #e3f1ec;
    color: #2f7a5f;
    border: solid 1px #2f7a5f;
    width: 90px;
    text-align: justify;
    margin-bottom: 6px;
}
</style>
</body>
</html>
